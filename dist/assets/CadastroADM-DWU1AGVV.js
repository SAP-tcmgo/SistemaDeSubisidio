import{j as e,r as i,u as X,al as P}from"./vendor-others-Di0KkQDI.js";import{S as G,H as K}from"./Sidebar-BZGUXzy7.js";import{I as r}from"./input-xcPInw0g.js";import{B as R}from"./button-DCRuCXyE.js";import{C as N,b as S,c as y,a as C}from"./card-DU1JPvSC.js";import{X as Q,A as W,i as $}from"./vendor-lucide-DmcWVqu_.js";import{d as L}from"./main-ByvVTPME.js";/* empty css                                    */import{k as D,c as E}from"./vendor-firebase-DUe4cX6Q.js";import"./vendor-react-query-De-ebuA0.js";const Y=({index:l,rangeStart:x,rangeEnd:p,percentage:m,onRangeStartChange:h,onRangeEndChange:g,onPercentageChange:b,onRemove:u,isRemovable:j})=>e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center p-4 border border-gray-200 rounded-md bg-white",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`rangeStart-${l}`,className:"block text-sm font-medium text-gray-700 mb-1",children:"De"}),e.jsx(r,{id:`rangeStart-${l}`,type:"number",min:"0",value:x,onChange:o=>h(o.target.value),placeholder:"Mínimo",className:"w-full"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`rangeEnd-${l}`,className:"block text-sm font-medium text-gray-700 mb-1",children:"a"}),e.jsx(r,{id:`rangeEnd-${l}`,type:"number",min:"0",value:p,onChange:o=>g(o.target.value),placeholder:"Máximo",className:"w-full"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:`percentage-${l}`,className:"block text-sm font-medium text-gray-700 mb-1",children:"Percentual (%)"}),e.jsx(r,{id:`percentage-${l}`,type:"number",min:"0",max:"100",value:m,onChange:o=>b(o.target.value),placeholder:"Percentual",className:"w-full"})]}),j&&e.jsx("div",{className:"mt-8",children:e.jsx(R,{type:"button",variant:"ghost",size:"sm",onClick:u,className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:e.jsx(Q,{size:20})})})]}),oe=()=>{const[l,x]=i.useState(!1),p=X(),[m,h]=i.useState(""),[g,b]=i.useState(""),[u,j]=i.useState(""),[o,I]=i.useState(""),[w,M]=i.useState(""),[k,z]=i.useState(""),[A,B]=i.useState(""),[F,H]=i.useState(""),[d,v]=i.useState([{id:"1",rangeStart:"",rangeEnd:"10000",percentage:"20"}]),O=()=>{const t=d[d.length-1].rangeEnd;v([...d,{id:Date.now().toString(),rangeStart:t,rangeEnd:"",percentage:""}])},T=a=>{v(d.filter(t=>t.id!==a))},f=(a,t,s)=>{v(d.map(c=>c.id===a?{...c,[t]:s}:c))},V=a=>{if(!a)return 0;const t=a.replace(/\./g,"").replace(",",".");return parseFloat(t)||0},q=async a=>{a.preventDefault();const t=(s,c)=>{const n=parseInt(s)||0;return c?`${n.toLocaleString("pt-BR")} - ${parseInt(c).toLocaleString("pt-BR")}`:`Acima de ${n.toLocaleString("pt-BR")}`};try{const s={AnoLegislatura:m,Valor:V(g),fixadoPelaLei:u,dataEntradaVigorLei:o};await D(E(L,"SubsidiosDeputadosEstaduais"),s);const c={AnoLegislatura:w,Valor:V(k),fixadoPelaLei:A,dataEntradaVigorLei:F};await D(E(L,"SubsidiosMinistrosSTF"),c);for(const n of d){const U={AnoLegislatura:m,NrHabitantes:t(n.rangeStart,n.rangeEnd),PercentualUtilizado:`${n.percentage}%`,RangeStart:parseInt(n.rangeStart)||0,RangeEnd:n.rangeEnd?parseInt(n.rangeEnd):null,PercentageValue:parseInt(n.percentage)||0};await D(E(L,"PercentualSalarioDep"),U)}P("Dados salvos com sucesso!",{description:"As informações do administrador foram cadastradas no Firebase."})}catch(s){console.error("Erro ao salvar dados no Firebase:",s),P("Erro ao salvar dados!",{description:"Ocorreu um erro ao tentar salvar as informações no Firebase. Verifique o console para mais detalhes."})}},J=()=>{x(!l)};return e.jsxs("div",{className:"dashboard-theme min-h-screen bg-gray-50",children:[e.jsx(G,{isOpen:l,setIsOpen:x}),e.jsxs("div",{className:`flex flex-col flex-1 transition-all duration-300 ease-in-out ${l?"ml-64":"ml-0"}`,children:[e.jsx(K,{toggleSidebar:J}),e.jsxs("main",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex items-center mb-6 cursor-pointer",onClick:()=>p("/telaInicial"),children:[e.jsx(W,{className:"mr-2 text-tribunal-blue",size:24}),e.jsx("h1",{className:"text-3xl font-bold text-tribunal-blue",children:"Cadastro de Administrador"})]}),e.jsxs("form",{onSubmit:q,className:"w-full max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[" ",e.jsxs(N,{className:"md:col-span-1 h-full",children:[e.jsx(S,{children:e.jsx(y,{className:"text-xl font-bold text-primary",children:"Subsídios dos Deputados Estaduais"})}),e.jsx(C,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-[15px]",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ano/Legislatura"}),e.jsx(r,{value:m,onChange:a=>h(a.target.value),placeholder:"2020/2024"})]}),e.jsxs("div",{className:"ml-[-5px] w-[90px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor"}),e.jsx("div",{className:"relative",children:e.jsx(r,{value:g,onChange:a=>b(a.target.value),placeholder:"0,00"})})]}),e.jsxs("div",{className:"ml-[-40px] w-[120px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fixado pela Lei"}),e.jsx(r,{value:u,onChange:a=>j(a.target.value),placeholder:"1.111/11"})]}),e.jsxs("div",{className:"ml-[-43px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data entrada em vigor"}),e.jsxs("div",{className:"relative",children:[e.jsx(r,{type:"date",value:o,onChange:a=>I(a.target.value),className:"pl-10"}),e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",size:16})]})]})]})})]}),e.jsxs(N,{className:"md:col-span-1 h-full",children:[e.jsx(S,{children:e.jsx(y,{className:"text-xl font-bold text-primary",children:"Subsídios dos Ministros do STF"})}),e.jsx(C,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-[15px]",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ano/Legislatura"}),e.jsx(r,{value:w,onChange:a=>M(a.target.value),placeholder:"2020/2024"})]}),e.jsxs("div",{className:"ml-[-5px] w-[90px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor"}),e.jsx("div",{className:"relative",children:e.jsx(r,{value:k,onChange:a=>z(a.target.value),placeholder:"0,00"})})]}),e.jsxs("div",{className:"ml-[-40px] w-[120px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fixado pela Lei"}),e.jsx(r,{value:A,onChange:a=>B(a.target.value),placeholder:"1.111/11"})]}),e.jsxs("div",{className:"ml-[-43px]",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data entrada em vigor"}),e.jsxs("div",{className:"relative",children:[e.jsx(r,{type:"date",value:F,onChange:a=>H(a.target.value),className:"pl-10"}),e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",size:16})]})]})]})})]}),e.jsxs(N,{className:"mt-[10px] md:col-span-2",children:[e.jsx(S,{children:e.jsx(y,{className:"text-xl font-bold text-primary",children:"Percentuais do salário de Deputados Estaduais a ser utilizado para cálculo por habitante"})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-4",children:[d.map((a,t)=>e.jsx(Y,{index:t,rangeStart:a.rangeStart,rangeEnd:a.rangeEnd,percentage:a.percentage,onRangeStartChange:s=>f(a.id,"rangeStart",s),onRangeEndChange:s=>f(a.id,"rangeEnd",s),onPercentageChange:s=>f(a.id,"percentage",s),onRemove:()=>T(a.id),isRemovable:d.length>1},a.id)),e.jsx("div",{className:"mt-4",children:e.jsx(R,{type:"button",variant:"outline",onClick:O,className:"text-secondary border-secondary hover:text-secondary/95",children:"Adicionar Nova Faixa"})})]})})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(R,{type:"submit",className:"bg-secondary hover:bg-secondary/90",children:"Salvar Dados"})})]})]})]})]})};export{oe as default};
